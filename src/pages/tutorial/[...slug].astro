---
import { getCollection } from 'astro:content';
import TutorialLayout from '../../layouts/TutorialLayout.astro';

export async function getStaticPaths() {
  const tutorials = await getCollection('tutorials');
  return tutorials.map((tutorial) => ({
    params: { slug: tutorial.slug },
    props: { tutorial },
  }));
}

const { tutorial } = Astro.props;
const { Content } = await tutorial.render();
const { title, description, section, stepNumber, totalSteps } = tutorial.data;
---

<TutorialLayout
  title={title}
  description={description}
  section={section}
  totalSteps={totalSteps}
  currentStep={stepNumber}
>
  <Content />
</TutorialLayout>
